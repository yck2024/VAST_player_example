<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Criteo Owned Video Player SDK demo</title>
    <style>
      :root {
        color-scheme: light dark;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      body {
        margin: 0;
        padding: 2rem 1.5rem 4rem;
        background: #0f172a;
        color: #e2e8f0;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 2rem;
      }

      h1 {
        font-size: clamp(1.8rem, 2.5vw, 2.4rem);
        margin: 0;
        text-align: center;
        color: #38bdf8;
      }

      p.description {
        max-width: 720px;
        margin: 0 auto;
        line-height: 1.6;
        text-align: center;
        color: #cbd5f5;
      }

      form {
        width: min(720px, 100%);
        background: rgba(15, 23, 42, 0.85);
        border: 1px solid rgba(148, 163, 184, 0.3);
        border-radius: 16px;
        padding: 1.75rem;
        display: grid;
        gap: 1.25rem;
        box-shadow: 0 20px 40px rgba(15, 23, 42, 0.3);
      }

      label {
        font-weight: 600;
        font-size: 0.95rem;
        display: flex;
        flex-direction: column;
        gap: 0.6rem;
      }

      input[type="text"],
      input[type="url"] {
        padding: 0.75rem 1rem;
        border-radius: 10px;
        border: 1px solid rgba(148, 163, 184, 0.3);
        background: rgba(30, 41, 59, 0.8);
        color: inherit;
        font-size: 0.95rem;
        transition: border-color 0.2s ease, box-shadow 0.2s ease;
      }

      input[type="text"]:focus,
      input[type="url"]:focus {
        outline: none;
        border-color: #38bdf8;
        box-shadow: 0 0 0 3px rgba(56, 189, 248, 0.15);
      }

      button {
        justify-self: start;
        padding: 0.75rem 1.5rem;
        border-radius: 999px;
        border: none;
        background: linear-gradient(135deg, #38bdf8, #818cf8);
        color: #0f172a;
        font-weight: 600;
        font-size: 1rem;
        cursor: pointer;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
      }

      button:hover {
        transform: translateY(-1px);
        box-shadow: 0 15px 30px rgba(56, 189, 248, 0.25);
      }

      .player-shell {
        width: min(960px, 100%);
        background: rgba(15, 23, 42, 0.6);
        border-radius: 20px;
        border: 1px solid rgba(148, 163, 184, 0.2);
        padding: 1rem;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      #video-player {
        width: 100%;
        min-height: 250px;
      }

      .player-shell:has(iframe) {
        padding: 0;
        overflow: hidden;
      }

      .note {
        max-width: 720px;
        line-height: 1.6;
        color: #94a3b8;
        font-size: 0.9rem;
      }

      @media (max-width: 640px) {
        body {
          padding: 1.5rem 1rem 3rem;
        }

        form {
          padding: 1.25rem;
        }
      }
    </style>
  </head>
  <body>
    <h1>Criteo Owned Video Player SDK demo</h1>
    <p class="description">
      This page demonstrates how to instantiate the Criteo Owned Video Player via the
      latest SDK. Provide a VAST tag URL and optional OM SDK resources, then
      click <strong>Load Player</strong> to render the experience below.
    </p>

    <form id="player-form">
      <label>
        VAST tag URL
        <input
          type="url"
          id="vast-url"
          required
          value="https://rm-v.jp2.as.criteo.com/v?rm_e=DguW5zRxAos2q7G4bRMT_PkBCIV07MmiZNjKqK6NMe3lJMKDrzVBdWgndzlnhlR-qKLrVc81fE3Q3rrZVBecrsPCb5pn0FCRrY_oe-mwzymnuRJpO4Jhz3v_4_cMJmUWi0tBHJi4ikb3UyFNIjQP8rkNkPikcOJLh-e_iJJSoLXSavMjKt5OX8WWFE_lYXpJ11t77bwM2Zei6C7rpbc3zEF9Axadox4mPSmDI7szUrCf-gIA7KcrAmesAjGsgZD2Xr1sRMHcQYC5a9PKnnBS3DdP1CkuWgwPQAiCuCk4EdI3Oulc2bi8LJVkMdKub2WGzeVxR1_uKcTheWLekWxTRInakfrLEU5LaKTyryfprL8bXrSNtPEsl783PYA1CcVSyLlXW-6kzlKAlzrlcIOV5HEJ9UpOMA-coNQnC4VODj1wUii6WR3aegacd8SEwh9yj5oBAKIRWAQfkpTn08cPCSh43LkDVhQqiql2ZQoXQ0zUah80dggxKDDFj5IWybxAsJ_aaRL4f-Dz-a5I8e-K_aaVyEJeB-Vr3vYyiN2hW4vI0MlLlEi_Bz90EX53u8gCA0syNmCoysw6LtYTKW5yYORkQnBaSeJbo777KWjJhiR5n81YYXL4e15PynE737CiOnQqE2T9yO83eD3u_1Vj9XAYo3ydCp7nKDSZkQyRoIt91qXEUylnI17irweMNMYsA3VH1QVl3nFuehuxDhfvCKn3BYVjAd85lCF_U5risn8gdwcQv2kAHZplp7t_VMj9mm2Ujj8AdsOQx4T5r6gwTnBLSnkMeAwNOv4S4CtESSc&ev=4"
        />
      </label>

      <label>
        Alt text
        <input type="text" id="alt-text" value="Criteo Video Player" />
      </label>

      <label>
        OMID session client URL
        <input
          type="url"
          id="omid-session-client"
          value="https://static.criteo.net/banners/js/omidjs/stable/omid-session-client-v1.js"
        />
      </label>

      <label>
        OM Web integration script URL
        <input
          type="url"
          id="om-web"
          value="https://static.criteo.net/banners/js/omidjs/stable/omweb-v1.js"
        />
      </label>

      <button type="submit">Load player</button>
    </form>

    <div class="player-shell">
      <div id="video-player" role="region" aria-live="polite"></div>
    </div>

    <p class="note">
      The integration follows the
      <a
        href="https://developers.criteo.com/retailer-integration/docs/criteo-owned-video-player-integration"
        target="_blank"
        rel="noreferrer noopener"
      >official documentation</a>
      by loading the player via the ES module bundle and providing the optional
      OMID resources for viewability measurement.
    </p>

    <script type="module">
      import { criteoVideoPlayerFromUrl } from "https://swusteven.github.io/video-ad-player-dist/criteo-video-player.es.js";

      const form = document.getElementById("player-form");
      const vastInput = document.getElementById("vast-url");
      const altTextInput = document.getElementById("alt-text");
      const omidSessionClientInput = document.getElementById("omid-session-client");
      const omWebInput = document.getElementById("om-web");
      const playerContainer = document.getElementById("video-player");

      async function renderPlayer(event) {
        event?.preventDefault();

        const vastUrl = vastInput.value.trim();
        if (!vastUrl) {
          alert("Please provide a VAST tag URL.");
          return;
        }

        playerContainer.innerHTML = "";

        try {
          await criteoVideoPlayerFromUrl(vastUrl, "video-player", {
            altText: altTextInput.value.trim() || undefined,
            sessionClientUrl: omidSessionClientInput.value.trim() || undefined,
            omWebUrl: omWebInput.value.trim() || undefined,
          });
        } catch (error) {
          console.error("Failed to initialize Criteo video player", error);
          playerContainer.innerHTML = `
            <div style="padding: 1.5rem; text-align: center; color: #fca5a5;">
              Unable to load the player. Check the console for details.
            </div>
          `;
        }
      }

      form.addEventListener("submit", renderPlayer);

      // Auto initialize on page load with the default VAST tag.
      renderPlayer();
    </script>
  </body>
</html>
